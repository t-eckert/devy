name: Docker Image CI

on:
  push:
  pull_request:

jobs:

  test:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
      
    - name: Setup database
      run: make create-local-db

    - name: Run backend
      run: cd backend && cargo run

    - name: Seed database
      run: make seed-local-db
        
    - name: Run integration tests
      run: make run-integration-tests
